<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>WYMeditor</title>
    <!-- build:css ../wymeditor/skins/default/skin.css -->
    <link rel="stylesheet" type="text/css" href="../wymeditor/skins/default/skin.css" />
    <!-- endbuild -->
</head>
<body>
    <h1>WYMeditor integration example - more inline elements</h1>
    <h2>
        Adding <code title="Abbreviation">abbr</code>,
        <code title="Acronym">acronym</code>,
        <code title="Citation">cite</code>,
        <code title="Code">code</code>,
        <code title="Deleted content">del</code>,
        <code title="Inserted content">ins</code>
        and <code title="Generic inline element">span</code> support
    </h2>
    <p><a href="http://www.wymeditor.org/">WYMeditor</a> is a web-based XHTML WYSIWYM editor.</p>
    <form method="post" action="">
        <textarea class="wymeditor"></textarea>
        <input type="submit" class="wymupdate" />
    </form>

    <!-- build:js vendor/jquery/jquery.js -->
    <!-- endbuild -->
    <!-- build:js ../wymeditor/jquery.wymeditor.js -->
    <script type="text/javascript" src="../test/load-src.dev.js"></script>
    <script type="text/javascript">
        loadWymSrc('../');
    </script>
    <!-- endbuild -->


    <script type="text/javascript">
        jQuery(function() {
            WYMeditor.DIALOGS.wrap = {
                getBodyHtml: function () {
                    return "" +
                        "<form>" +
                            "<fieldset>" +
                                "<legend>Wrap</legend>" +
                                "<div class='row'>" +
                                    "<label>Type</label>" +
                                    "<select class='wym_select_inline_element'>" +
                                        "<option selected value='abbr'>Abbreviation</option>" +
                                        "<option value='acronym'>Acronym</option>" +
                                        "<option value='cite'>Citation, reference</option>" +
                                        "<option value='code'>Code</option>" +
                                        "<option value='del'>Deleted content</option>" +
                                        "<option value='ins'>Inserted content</option>" +
                                        "<option value='span'>Generic</option>" +
                                    "</select>" +
                                "</div>" +
                                "<div class='row'>" +
                                    "<label>Title</label>" +
                                    "<input type='text' class='wym_title' value='' size='40' />" +
                                "</div>" +
                                "<div class='row row-indent'>" +
                                    "<input class='wym_submit' type='submit'" +
                                    " value='{Submit}' />" +
                                    "<input class='wym_cancel' type='button'" +
                                    "value='{Cancel}' />" +
                                "</div>" +
                            "</fieldset>" +
                        "</form>"
                },
                bodyClass: "wym_dialog_wrap",
                shouldOpen: function () {
                    var wym = this;
                    if (
                        wym.hasSelection() !== true ||
                        wym.selection().isCollapsed !== false
                       ) {
                        return false;
                    }
                    return true;
                },
                title: "{Wrap}",
                submitHandler: function(wDialog) {
                    var wym = this,
                        doc = wDialog.document,
                        tag = jQuery(doc).find('.wym_select_inline_element').val(),
                        title = jQuery(doc).find('.wym_title').val();

                    wym.wrap( '<' + tag + ' title="' + title + '">', '</' + tag + '>' );
                    wDialog.close();
                }
            };

            //add the 'Wrap' translation (used here for the dialog's title)
            jQuery.extend(WYMeditor.STRINGS['en'], {
                'Wrap': 'Wrap'
            });

            jQuery('.wymeditor').wymeditor({
                postInit: function(wym) {
                    //set the editor's content
                    wym.html("<p>This is some text with which to test.</p>"
                            + "<p>Select 'some text' and click on the Wrap button.</p>"
                            + "<p>Select it again and click on the Unwrap button.</p>");

                    //construct the wrap button's html
                    //note: the button image needs to be created ;)
                    var html = "<li class='wym_tools_wrap'>"
                             + "<a href='#'"
                             + " title='Wrap'"
                             + " style='background-image:"
                             + " url(../wymeditor/skins/default/icons.png)'>"
                             + "Wrap"
                             + "</a></li>";

                    //add the button to the tools box
                    jQuery(wym._box)
                    .find(wym._options.toolsSelector + wym._options.toolsListSelector)
                    .append(html);

                    //construct the unwrap button's html
                    //note: the button image needs to be created ;)
                    html = "<li class='wym_tools_unwrap'>"
                             + "<a href='#'"
                             + " title='Unwrap'"
                             + " style='background-image:"
                             + " url(../wymeditor/skins/default/icons.png)'>"
                             + "Unwrap"
                             + "</a></li>";

                    //add the button to the tools box
                    jQuery(wym._box)
                    .find(wym._options.toolsSelector + wym._options.toolsListSelector)
                    .append(html);

                    //handle click event on wrap button
                    jQuery(wym._box)
                    .find('li.wym_tools_wrap a').click(function() {
                        wym.dialog('wrap');
                        return(false);
                    });

                    //handle click event on unwrap button
                    jQuery(wym._box)
                    .find('li.wym_tools_unwrap a').click(function() {
                        wym.unwrap();
                        return(false);
                    });

                }
            });
        });
    </script>
</body>
</html>
